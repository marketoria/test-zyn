








function getVirtulData(year, month) {
      year = year;
    var date = +echarts.number.parseDate(year + '-' + month + '-01');
    var end = +echarts.number.parseDate(year + '-' + (month + 1) + '-01');
    var dayTime = 3600 * 24 * 1000;
    var data = [];
    for (var time = date; time < end; time += dayTime) {
        data.push([
            echarts.format.formatTime('yyyy-MM-dd', time),
            Math.floor(Math.random() * 1000)
        ]);
    }
    console.log(data[data.length - 1]);
    return data;
}



var myChart4 = echarts.init(document.getElementById('right-top'));
var Data4={
	"avg": [210420.3225806451612903225806451612903226, 502566.1612903225806451612903225806451613, 545589.4, 563900.4516129032258064516129032258064516, 516887.3, 494886.72, 586198.75],
	"month": ["2017-07", "2017-08", "2017-09", "2017-10", "2017-11", "2017-12", "2018-01"],
	"parm": {
		"TITLE": "用户活跃情况"
	},
	"value": [[["2017-07-01", 154276], ["2017-07-02", 250883], ["2017-07-03", 215493], ["2017-07-04", 268757], ["2017-07-05", 161282], ["2017-07-06", 148103], ["2017-07-07", 178284], ["2017-07-08", 203902], ["2017-07-09", 261401], ["2017-07-10", 211141], ["2017-07-11", 137029], ["2017-07-12", 138762], ["2017-07-13", 280895], ["2017-07-14", 289439], ["2017-07-15", 205834], ["2017-07-16", 213658], ["2017-07-17", 264489], ["2017-07-18", 224599], ["2017-07-19", 158247], ["2017-07-20", 280761], ["2017-07-21", 237279], ["2017-07-22", 249481], ["2017-07-23", 181619], ["2017-07-24", 202203], ["2017-07-25", 204814], ["2017-07-26", 219359], ["2017-07-27", 278131], ["2017-07-28", 156144], ["2017-07-29", 187640], ["2017-07-30", 223058], ["2017-07-31", 136067]], [["2017-08-01", 648390], ["2017-08-02", 677126], ["2017-08-03", 689769], ["2017-08-04", 480654], ["2017-08-05", 510172], ["2017-08-06", 474967], ["2017-08-07", 330954], ["2017-08-08", 353114], ["2017-08-09", 348469], ["2017-08-10", 632800], ["2017-08-11", 570504], ["2017-08-12", 541864], ["2017-08-13", 467853], ["2017-08-14", 526454], ["2017-08-15", 302371], ["2017-08-16", 610012], ["2017-08-17", 612208], ["2017-08-18", 394254], ["2017-08-19", 380631], ["2017-08-20", 316415], ["2017-08-21", 389106], ["2017-08-22", 615149], ["2017-08-23", 394882], ["2017-08-24", 422065], ["2017-08-25", 771066], ["2017-08-26", 467925], ["2017-08-27", 498335], ["2017-08-28", 745632], ["2017-08-29", 655665], ["2017-08-30", 324375], ["2017-08-31", 426370]], [["2017-09-01", 718183], ["2017-09-02", 723575], ["2017-09-03", 689564], ["2017-09-04", 363781], ["2017-09-05", 575250], ["2017-09-06", 423025], ["2017-09-07", 564553], ["2017-09-08", 613582], ["2017-09-09", 772759], ["2017-09-10", 530925], ["2017-09-11", 494178], ["2017-09-12", 529264], ["2017-09-13", 761457], ["2017-09-14", 423656], ["2017-09-15", 327509], ["2017-09-16", 402605], ["2017-09-17", 634518], ["2017-09-18", 356563], ["2017-09-19", 772658], ["2017-09-20", 395806], ["2017-09-21", 623716], ["2017-09-22", 448916], ["2017-09-23", 793313], ["2017-09-24", 340478], ["2017-09-25", 449404], ["2017-09-26", 466110], ["2017-09-27", 326153], ["2017-09-28", 513977], ["2017-09-29", 795563], ["2017-09-30", 536641]], [["2017-10-01", 549798], ["2017-10-02", 486542], ["2017-10-03", 459630], ["2017-10-04", 740301], ["2017-10-05", 408229], ["2017-10-06", 752098], ["2017-10-07", 618589], ["2017-10-08", 471991], ["2017-10-09", 644535], ["2017-10-10", 580064], ["2017-10-11", 388612], ["2017-10-12", 416346], ["2017-10-13", 765410], ["2017-10-14", 544362], ["2017-10-15", 784021], ["2017-10-16", 709206], ["2017-10-17", 421411], ["2017-10-18", 767768], ["2017-10-19", 397864], ["2017-10-20", 611697], ["2017-10-21", 684589], ["2017-10-22", 386858], ["2017-10-23", 598699], ["2017-10-24", 640089], ["2017-10-25", 364146], ["2017-10-26", 374936], ["2017-10-27", 627393], ["2017-10-28", 534926], ["2017-10-29", 673954], ["2017-10-30", 773578], ["2017-10-31", 303272]], [["2017-11-01", 926149], ["2017-11-02", 342279], ["2017-11-03", 674247], ["2017-11-04", 321859], ["2017-11-05", 245907], ["2017-11-06", 421829], ["2017-11-07", 757913], ["2017-11-08", 963553], ["2017-11-09", 707847], ["2017-11-10", 721229], ["2017-11-11", 329091], ["2017-11-12", 211743], ["2017-11-13", 267934], ["2017-11-14", 277127], ["2017-11-15", 304868], ["2017-11-16", 426030], ["2017-11-17", 414786], ["2017-11-18", 329855], ["2017-11-19", 324659], ["2017-11-20", 437759], ["2017-11-21", 370156], ["2017-11-22", 594865], ["2017-11-23", 816191], ["2017-11-24", 1046258], ["2017-11-25", 580735], ["2017-11-26", 393903], ["2017-11-27", 639521], ["2017-11-28", 682526], ["2017-11-29", 494770], ["2017-11-30", 481030]], [["2017-12-27", 574198], ["2017-12-31", 587290], ["2017-12-09", 297126], ["2017-12-10", 327773], ["2017-12-11", 419990], ["2017-12-12", 399054], ["2017-12-13", 233475], ["2017-12-14", 527656], ["2017-12-15", 354349], ["2017-12-16", 417294], ["2017-12-17", 354522], ["2017-12-18", 457856], ["2017-12-19", 426040], ["2017-12-20", 420069], ["2017-12-21", 777300], ["2017-12-07", 665156], ["2017-12-08", 585453], ["2017-12-22", 558837], ["2017-12-26", 450311], ["2017-12-29", 448477], ["2017-12-24", 440705], ["2017-12-23", 543976], ["2017-12-25", 379011], ["2017-12-28", 577358], ["2017-12-30", 1148892]], [["2018-01-04", 489966], ["2018-01-03", 555741], ["2018-01-01", 560512], ["2018-01-02", 738576]]]
}
;
// $.ajax({
//     url:getContextPath()+'/querykpmgs04.json',
//     type:'post',
//     dataType:'json',
//     cache:false,
//     async:false,
//     success:function(respdata){
//          Data4 = respdata
//         }

    
// })

var seriesdata=[];
var avg =Data4.avg

for(var i=0;i<Data4.value.length;i++){
	var xx = {
			series: {
				symbolSize: function(val) {
					//console.log("val:"+val);
					var arr = val[0].split("-");
					var str = arr[0]+"-"+arr[1];
					//console.log("str:"+str);
					var j = Data4.month.indexOf(str);
					//console.log("avg["+j+"]:"+avg[j]);
					//console.log("val[1]/(avg[j]/10):"+val[1]/(avg[j]/10));
					return val[1]/(avg[j]/10);
				},
				data: Data4.value[i]
			},
			calendar: [{
				range: Data4.month[i]
			}],
	}
	seriesdata.push(xx);
	/*console.log("Data4.value["+i+"]:"+Data4.value[i]);
	console.log("### "+i+" seriesdata.series.data:"+seriesdata[i].series.data);
	console.log("### "+i+" seriesdata.series.symbolSize:"+seriesdata[i].series.symbolSize);*/
}  

var TITLE = Data4.parm.TITLE;
  var option4 = {
    textStyle:{
        fontFamily: "思源黑体",
    },
    baseOption: {
        title: {
            text: TITLE,
            textStyle:{
                color:'#c2e5fb',
                fontWeight:'normal'
            },
    
           
        },

        tooltip: {
            formatter: function (p) {
                var format = echarts.format.formatTime('yyyy-MM-dd', p.data[0]);
                return format+'&nbsp;' + ': ' + comdify(p.data[1]);
            },
            position: 'top',
        },


        calendar: [{
            top:85,
            left:15,
            orient: 'vertical',
            yearLabel: {
                margin:0,
                show: false
            },
            monthLabel: {
                margin: 0,
                show: false
            },
            dayLabel: {
                firstDay: 1,
                nameMap: ['周日', '周一', '周二', '周三', '周四', '周五', '周六'],
                textStyle: {
                    color: '#fff'
                }
            },
            cellSize:[40,40],
            itemStyle:{
            normal:{
                color:'#071b37',//变格子颜色
                borderColor:'rgba(255,255,255, 0.1)'
            }
        }

        }],

        series: [{
            type: 'effectScatter',
            coordinateSystem: 'calendar',
            itemStyle:{
                normal:{
                    color:'#7274bb'//变格子颜色
                }
            }
            
        }],
        timeline: {
            axisType: 'category',
            autoPlay: true,
            playInterval: 6000,
            // orient:'vertical',//竖
            orient:'horizontal',
            tooltip:{
            	show:false,
            },
            left:0,
            bottom:0,
            height:30,
            width:280,
            inverse:false,
            label: {
                formatter: function(s) {
                    return (new Date(s)).getMonth() + 1 + '月';
                },
                normal: {
                    textStyle: {
                        color: '#fff',
                    },
                },
                emphasis: {
                    textStyle: {
                        color: '#99CC99',
                    },
                }
            },
            controlStyle: {
                itemSize:14,
                normal: {
                    color: '#fff',
                    borderColor: '#fff'
                },
                emphasis: {
                    color: '#99CC99',
                    borderColor: '#99CC99'
                } //高亮时显示颜色
            },
            checkpointStyle: {
                color:'#7274bb',
                borderColor:'#7274bb',
                borderWidth: 1
            },
            lineStyle: {
                color: '#fff',
                borderColor: '#fff'
            },
            data: Data4.month,
        }
    },
    options:seriesdata,






};

myChart4.setOption(option4);